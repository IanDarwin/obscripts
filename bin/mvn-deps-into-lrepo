#!/bin/sh

# mvn-deps-into-lrepo
# Package all dependencies of a Maven project into a local repository.
# Must be run in the root of the project to find pom.xml.

TMPDIR=$(mktemp -d -p /tmp pkg-deps-lrep-XXXXXXXX)


if [ ! -f pom.xml ]; then
	echo No pom.xml in $PWD
	exit 1
fi

mvn org.apache.maven.plugins:maven-dependency-plugin:2.1:copy-dependencies \
	-DaddParentPoms=true \
	-DoutputDirectory=$TMPDIR \
	-Dmdep.useRepositoryLayout=true


cd ${TMPDIR}

jar cvf LOCAL_REPOSIORY.jar *


echo "Output is ${PWD}/LOCAL_REPOSITORY.jar; I suggest you mv it someplace safe, then rm -r ${PWD}"
