#!/bin/sh -u

# get the current OpenBSD snapshot


cd /usr/download/openbsd/i386 || exit

PROTO=ftp
SITE=ftp.openbsd.org
PREFIX=pub
TOP=OpenBSD/snapshots
ARCH=i386
VERBOSE=""
prog=ftp

USAGE="$0 [-s][-a arch ] [ -h hostabbr|fqdn]
-a arch := i386|sparc|hppa|...
-v -- Verbose
"

function usage {		# give usage message, and exit
	echo "Usage: $USAGE" 2>&1
	exit 1
}

while getopts "h:p:sv" opt 
do 
 	 case "$opt" in 
		h)	
			case "$OPTARG" in
			geek*) SITE=ftp.geek-girl.com
					;;
			lager)	SITE=lager.cs.ualberta.ca
					;;
			sq)		SITE=ftp.softquad.com
					PREFIX=pub/priv
					;;
			*)		SITE=${OPTARG};;
			esac
			;;
		p)	PROTO=$optarg;;
		s)	prog=ssh;;
		v)	VERBOSE=v;;
		*)	usage;;
	esac
done
shift `expr $OPTIND - 1`		 # leave just filenames

FILES="MD5 INSTALL.${ARCH} bsd floppy26.fs floppy26B.fs base26.tar.gz etc26.tar.gz game26.tar.gz install-386.txt libssl26.tar.gz man26.tar.gz misc26.tar.gz xbase26.tar.gz xfont26.tar.gz xserv26.tar.gz xshare26.tar.gz"

if [ "" != "${VERBOSE}" ]; then
	set -x
fi

if [ $# -ne 0 ]; then
	usage
fi

for f in ${FILES}
do
	echo ${f}
	case ${prog} in
	ftp)
		ftp ${PROTO}://${SITE}/${PREFIX}/${TOP}/${ARCH}/${f}
		;;
	ssh)
		scp ian@${SITE}:~ftp/${PREFIX}/${TOP}/${ARCH}/${f} .
		;;
	esac
done
